<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="变长模板变长函数和变长模板参数我们知道C++11已经支持了C99的变长宏，但是，无论是宏，还是变长参数(C语言中存在)，整个机制的设计上， 没有任何一个对于传递参数的类型是了解的。我们可以看看变长函数的例子。 12345678910111213double SumOfFloat(int count,...)&amp;#123;    va_list ap;    double sum&#x3D;0;    va_s">
<meta property="og:type" content="article">
<meta property="og:title" content="变长模板">
<meta property="og:url" content="http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/index.html">
<meta property="og:site_name" content="boolsatellite">
<meta property="og:description" content="变长模板变长函数和变长模板参数我们知道C++11已经支持了C99的变长宏，但是，无论是宏，还是变长参数(C语言中存在)，整个机制的设计上， 没有任何一个对于传递参数的类型是了解的。我们可以看看变长函数的例子。 12345678910111213double SumOfFloat(int count,...)&amp;#123;    va_list ap;    double sum&#x3D;0;    va_s">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/img/Snipaste_2023-05-19_19-08-11.png">
<meta property="article:published_time" content="2023-05-19T16:00:00.000Z">
<meta property="article:modified_time" content="2023-05-20T03:20:25.694Z">
<meta property="article:author" content="boolsatellite">
<meta property="article:tag" content="c++11">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/Snipaste_2023-05-19_19-08-11.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>变长模板</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="boolsatellite" type="application/atom+xml">
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="/tags/">tags</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/boolsatellite">Projects</a></li><!--
     --><!--
       --><li><a href="/search/">Search</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2023/05/23/%E5%AF%B9%E9%BD%90%E6%94%AF%E6%8C%81/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2023/05/16/15.mass%20storage/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/&text=变长模板"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/&title=变长模板"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/&is_video=false&description=变长模板"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=变长模板&body=Check out this article: http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/&title=变长模板"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/&title=变长模板"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/&title=变长模板"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/&title=变长模板"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/&name=变长模板&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/&t=变长模板"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF"><span class="toc-number">1.</span> <span class="toc-text">变长模板</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%95%BF%E5%87%BD%E6%95%B0%E5%92%8C%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF%E5%8F%82%E6%95%B0"><span class="toc-number">1.1.</span> <span class="toc-text">变长函数和变长模板参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF%EF%BC%9A%E6%A8%A1%E6%9D%BF%E5%8F%82%E6%95%B0%E5%8C%85%E5%92%8C%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E5%8C%85"><span class="toc-number">1.2.</span> <span class="toc-text">变长模板：模板参数包和函数参数包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF%E8%BF%9B%E9%98%B6"><span class="toc-number">1.3.</span> <span class="toc-text">变长模板进阶</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        变长模板
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">boolsatellite</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2023-05-19T16:00:00.000Z" itemprop="datePublished">2023-05-20</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/c-11/" rel="tag">c++11</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1 id="变长模板"><a href="#变长模板" class="headerlink" title="变长模板"></a>变长模板</h1><h2 id="变长函数和变长模板参数"><a href="#变长函数和变长模板参数" class="headerlink" title="变长函数和变长模板参数"></a>变长函数和变长模板参数</h2><p>我们知道C++11已经支持了C99的变长宏，但是，<strong>无论是宏，还是变长参数(C语言中存在)，整个机制的设计上， 没有任何一个对于传递参数的类型是了解的</strong>。我们可以看看变长函数的例子。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> <span class="title function_">SumOfFloat</span><span class="params">(<span class="type">int</span> count,...)</span>&#123;</span><br><span class="line">    va_list ap;</span><br><span class="line">    <span class="type">double</span> sum=<span class="number">0</span>;</span><br><span class="line">    va_start(ap,count);      <span class="comment">//获得变长列表的句柄ap</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;count;i++)</span><br><span class="line">    sum+=va_arg(ap,<span class="type">double</span>);  <span class="comment">//每次获得一个参数</span></span><br><span class="line">    va_end(ap);</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%f\n&quot;</span>,SumOfFloat(<span class="number">3</span>,<span class="number">1.2f</span>,<span class="number">3.4</span>,<span class="number">5.6</span>));<span class="comment">//10.200000</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//参考下面链接，熟悉下C语言中变长函数的写法及原理</span></span><br></pre></td></tr></table></figure>

<p>只有使用表达式<code>va_arg(ap,double)</code>的时候，我们 才按照类型（实际是按类型长度）去变长参数列表中获得指定参数，以及为ap找到下一个参数的位置。对于printf函数来说，如何打印则得益于传递在字符串中的形如“%s”、“%d”这样的转义字，这都是对连续内存的一种解释，因此，对于一些没有定义转义字的非POD的数据来说，使用变长函数就会导致未定义的程序行为</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">char</span>* msg = <span class="string">&quot;hello%s&quot;</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;msg&quot;</span>,std::<span class="built_in">string</span>(<span class="string">&quot; world&quot;</span>));  </span><br><span class="line"><span class="comment">//程序将报错，</span></span><br><span class="line"><span class="comment">//无法通过可变参数函数传递非平凡类型“std::string”（又名“basic_string&lt;char&gt;”）的对象； 调用将在运行时中止</span></span><br></pre></td></tr></table></figure>

<p>对于c++这种强调类型的语言来说，是不愿意看到的，即使他是正确的。c++需要一种更现代的传参方式即<strong>类型和变量同时能够传递给变长参数的函数</strong>。一个好的方式就是使用C++的函数模板，在C++98 中，标准要求函数模板始终具有数目确定的模板参数及函数参数。</p>
<p>c++11中标准模板库存在 <code>tuple</code>类，在C++11中，tuple是pair类的一种更为泛化的表现形式。比起 pair，tuple是可以接受任意多个不同类型的元素的集合。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::tuple&lt;<span class="type">double</span>,<span class="type">char</span>,std::string&gt; cloolctions</span><br></pre></td></tr></table></figure>

<p>因为tuple可以接受任意多的参数。此外，和pair类似地，我们也可以更为简单地使用C++11的模板函数make_tuple来创造一个tuple 模板类型。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::<span class="built_in">make_tuple</span>(<span class="number">9.8</span>,<span class="string">&#x27;g&#x27;</span>,<span class="string">&quot;gravity&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>在C++11中我们看到了所谓的变长模板（variadic template）的实现。</p>
<h2 id="变长模板：模板参数包和函数参数包"><a href="#变长模板：模板参数包和函数参数包" class="headerlink" title="变长模板：模板参数包和函数参数包"></a>变长模板：模板参数包和函数参数包</h2><p>变长模板的的语法，以tuple为例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> ...Elements&gt; <span class="keyword">class</span> <span class="title class_">tuple</span>;</span><br></pre></td></tr></table></figure>

<p>在c++11中，我们使用 … 来表示参数的变长的，<code>Elements</code>被称为模板参数包，有了模板参数包，类模板tuple就可以接受多个参数做为模板参数，如：<code>tuple&lt;int , char , double&gt; </code>,编译器则可以将多个模板参数打包成为“单个的”模板参数包 Elements，即Elements在进行模板推导的时候，就是一个包含int、char 和double三种类型类型集合。</p>
<p>与普通模板相似，模板参数包也可以是非类型的</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如：</span></span><br><span class="line"><span class="keyword">template</span>＜<span class="type">int</span>...A＞<span class="keyword">class</span> <span class="title class_">NonTypeVariadicTemplate</span>&#123;&#125;;</span><br><span class="line">NonTypeVariadicTemplate＜<span class="number">1</span>,<span class="number">0</span>,<span class="number">2</span>＞ntvt;</span><br><span class="line"><span class="comment">//相当于：</span></span><br><span class="line"><span class="keyword">template</span>＜<span class="type">int</span>,<span class="type">int</span>,<span class="type">int</span>＞<span class="keyword">class</span> <span class="title class_">NonTypeVariadicTemplate</span>&#123;&#125;;</span><br><span class="line">NonTypeVariadicTemplate＜<span class="number">1</span>,<span class="number">0</span>,<span class="number">2</span>＞ntvt;</span><br><span class="line"><span class="comment">//除了类型的模板参数包和非类型的模板参数包，模板参数包实际上还是模板类型的,之后讨论</span></span><br></pre></td></tr></table></figure>

<p>一个模板参数包在模板推导时会被认为是模板的单个参数（虽然实际 上它将会打包任意数量的实参）。为了使用模板参数包，我们总是需 要将其解包（unpack）。在C++11中，这通常是通过一个名为包扩展 （pack expansion）的表达式来完成。比如：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tempalte &lt;<span class="keyword">typename</span> ...A&gt; <span class="keyword">class</span> <span class="title class_">Template</span>:<span class="keyword">private</span> B &lt;A...&gt;&#123;&#125;;</span><br></pre></td></tr></table></figure>

<p>这里的<code>...A</code>是表示课接受多个模板参数，参数包名为 A ， <code>A...</code>是一个包拓展，参数包会在包扩展的位置展开为多个参数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T1,<span class="keyword">typename</span> T2&gt; <span class="keyword">class</span> <span class="title class_">B</span>&#123;&#125;;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> ...A&gt; <span class="keyword">class</span> <span class="title class_">Template</span>:<span class="keyword">private</span> B&lt;A...&gt;&#123;&#125;;</span><br><span class="line">Template&lt;X,Y&gt; xy;</span><br></pre></td></tr></table></figure>

<p>如何才能利用模板参数包及包扩展，使得模板能够接受任意多的模板参数，且均能实例化出有效的对象呢？</p>
<p>在C++11中，实现tuple模板的方式给出了一种使用模板参数包的答案。这个思路是使用数学的归纳法，转换为计算机能够实现的手段则是递归。通过定义递归的模板偏特化定义，我们可以使得模板参数包在实例化时能够层层展开，直到参数包中的参数逐渐耗尽或到达某个数量的边界为止。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>...Elements&gt;<span class="keyword">class</span> <span class="title class_">tuple</span>;   <span class="comment">//变长模板的声明</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Head,<span class="keyword">typename</span>...Tail&gt;     <span class="comment">//递归的偏特化定义</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">tuple</span>&lt;Head,Tail...&gt;:<span class="keyword">private</span> tuple&lt;Tail...&gt;&#123;</span><br><span class="line">Head head;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">template</span>&lt;&gt;<span class="keyword">class</span> <span class="title class_">tuple</span>&lt;&gt;&#123;&#125;;                  <span class="comment">//边界条件</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    tuple&lt;<span class="type">int</span>, <span class="type">double</span>,<span class="type">float</span>&gt; t;</span><br><span class="line">    <span class="comment">//t.head = 20;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/img/Snipaste_2023-05-19_19-08-11.png"></p>
<p>我们声明了变长模板类tuple，其只包含一个模板参数，即Elements模板参数包。此外，我们又偏特化地定义了一个双参数的tuple的版本。该偏特化版本的tuple包含了两个参数，一个是类型模板参数Head，另一个则是模板参数包Tail，将Head型数据作为第一成员，而将使用了包扩展表达式的模板类tuple＜Tail…＞作为tuple＜Head,Tail… ＞的私有基类。这样一来，当程序员实例化一个形如tuple＜ double,int,char,float＞的类型时，则会引起基类的递归构造，这样的递归在tuple的参数包为0个的时候会结束。</p>
<p>使用非类型模板的例子：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="type">long</span>...nums&gt;<span class="keyword">struct</span> <span class="title class_">Multiply</span>;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="type">long</span> first,<span class="type">long</span>...last&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Multiply</span>&lt;first,last...&gt;&#123;</span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">long</span> val=first*Multiply&lt;last...&gt;::val;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">template</span>&lt;&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Multiply</span>&lt;&gt;&#123;</span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">long</span> val=<span class="number">1</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    cout&lt;&lt;Multiply&lt;<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&gt;::val&lt;&lt;endl;<span class="comment">//120</span></span><br><span class="line">    cout&lt;&lt;Multiply&lt;<span class="number">22</span>,<span class="number">44</span>,<span class="number">66</span>,<span class="number">88</span>,<span class="number">9</span>&gt;::val&lt;&lt;endl;<span class="comment">//50599296</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>c++11中我们还可以声明变长的模板函数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> ...T&gt; <span class="type">void</span> <span class="title">f</span><span class="params">(T ...args)</span></span>;</span><br></pre></td></tr></table></figure>

<p>在C++11中， 标准要求函数参数包必须唯一，且是函数的最后一个参数（模板参数包没有这样的要求）。</p>
<p>有了模板参数包和函数参数包两个概念，我们就可以实现C中变长函数的功能了。我们可以看看这个C++11提案中实现新的printf的例子:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Printf</span><span class="params">(<span class="type">const</span> <span class="type">char</span>*s)</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(*s)&#123;</span><br><span class="line">        <span class="keyword">if</span>(*s==<span class="string">&#x27;%&#x27;</span>&amp;&amp;*++s!=<span class="string">&#x27;%&#x27;</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="built_in">runtime_error</span>(<span class="string">&quot;invalid format string:missing arguments&quot;</span>);</span><br><span class="line">        cout&lt;&lt;*s++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T,<span class="keyword">typename</span>...Args&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Printf</span><span class="params">(<span class="type">const</span> <span class="type">char</span>*s,T value,Args...args)</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(*s)&#123;</span><br><span class="line">        <span class="keyword">if</span>(*s==<span class="string">&#x27;%&#x27;</span>&amp;&amp;*++s!=<span class="string">&#x27;%&#x27;</span>)&#123;</span><br><span class="line">            cout&lt;&lt;value;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Printf</span>(++s,args...);</span><br><span class="line">        &#125;</span><br><span class="line">        cout&lt;&lt;*s++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">throw</span> <span class="built_in">runtime_error</span>(<span class="string">&quot;extra arguments provided to Printf&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">Printf</span>(<span class="string">&quot;hello%s\n&quot;</span>,<span class="built_in">string</span>(<span class="string">&quot;world&quot;</span>));<span class="comment">//hello world</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>相比于变长函数(printf)，变长函数模板(Printf)不会丢弃参数的类型信息。因此重载的cout的操作符 &lt;&lt; 总是可以将具有类型的变量正确地打印出来。</p>
<h2 id="变长模板进阶"><a href="#变长模板进阶" class="headerlink" title="变长模板进阶"></a>变长模板进阶</h2><p>c++11中可以展开参数包的位置：</p>
<blockquote>
<p>表达式					   初始化列表</p>
<p>基类描述列表			类成员初始化列表</p>
<p>模板参数列表			通用属性列表</p>
<p>lambda函数的捕获列表</p>
</blockquote>
<p>一些有趣的包拓展语法：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> ...Arg&gt; <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(Arg&amp;&amp;...)</span></span>&#123;&#125;</span><br><span class="line"><span class="comment">//解包为：Arg1&amp;&amp; , ... , Argn&amp;&amp;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> ...A&gt; <span class="keyword">class</span> <span class="title class_">T</span>:<span class="keyword">private</span> B&lt;A&gt;...&#123;&#125;</span><br><span class="line"><span class="comment">//当使用 T&lt;X,Y&gt; 实例化时,会解包为</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">T</span>&lt;X,Y&gt;:<span class="keyword">private</span> B&lt;X&gt; , <span class="keyword">private</span> B&lt;Y&gt; &#123;&#125;   <span class="comment">//会解包为多重继承</span></span><br></pre></td></tr></table></figure>

<p>类似的现象也会发生在函数模板上：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>...T&gt;<span class="function"><span class="type">void</span> <span class="title">DummyWrapper</span><span class="params">(T...t)</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;<span class="function">T <span class="title">pr</span><span class="params">(T t)</span></span>&#123;</span><br><span class="line">    cout&lt;&lt;t;</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>...A&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">VTPrint</span><span class="params">(A...a)</span></span>&#123;</span><br><span class="line">    <span class="built_in">DummyWrapper</span>(<span class="built_in">pr</span>(a)...);<span class="comment">//包扩展解包为pr(1),pr(&quot;,&quot;)...,pr(&quot;,abc\n&quot;)</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">VTPrint</span>(<span class="number">1</span>,<span class="string">&quot;,&quot;</span>,<span class="number">1.2</span>,<span class="string">&quot;,abc\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在C++11中，标 准还引入了新操作符<code>sizeof...</code>其作用是计算参数包中的参数个数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span>...A&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Print</span><span class="params">(A...arg)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">assert</span>(<span class="literal">false</span>);<span class="comment">//非6参数偏特化版本都会默认assert(false)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//特化6参数的版本，若匹配失败则执行Print(A...arg)后执行assert</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Print</span><span class="params">(<span class="type">int</span> a1, <span class="type">int</span> a2, <span class="type">int</span> a3, <span class="type">int</span> a4, <span class="type">int</span> a5, <span class="type">int</span> a6)</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; a1 &lt;&lt; <span class="string">&quot;,&quot;</span> &lt;&lt; a2 &lt;&lt; <span class="string">&quot;,&quot;</span> &lt;&lt; a3 &lt;&lt; <span class="string">&quot;,&quot;</span></span><br><span class="line">         &lt;&lt; a4 &lt;&lt; <span class="string">&quot;,&quot;</span> &lt;&lt; a5 &lt;&lt; <span class="string">&quot;,&quot;</span> &lt;&lt; a6 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span>...A&gt;</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Vaargs</span><span class="params">(A...args)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> size = <span class="keyword">sizeof</span>...(A);<span class="comment">//计算变长包的长度</span></span><br><span class="line">    <span class="keyword">switch</span> (size) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">Print</span>(<span class="number">99</span>, <span class="number">99</span>, <span class="number">99</span>, <span class="number">99</span>, <span class="number">99</span>, <span class="number">99</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            <span class="built_in">Print</span>(<span class="number">99</span>, <span class="number">99</span>, args..., <span class="number">99</span>, <span class="number">99</span>, <span class="number">99</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            <span class="built_in">Print</span>(<span class="number">99</span>, <span class="number">99</span>, args..., <span class="number">99</span>, <span class="number">99</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            <span class="built_in">Print</span>(args..., <span class="number">99</span>, <span class="number">99</span>, <span class="number">99</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">            <span class="built_in">Print</span>(<span class="number">99</span>, args..., <span class="number">99</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">            <span class="built_in">Print</span>(<span class="number">99</span>, args...);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">            <span class="built_in">Print</span>(args...);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="built_in">Print</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">Vaargs</span>();<span class="comment">//99,99,99,99,99,99</span></span><br><span class="line">    <span class="built_in">Vaargs</span>(<span class="number">1</span>);<span class="comment">//99,99,1,99,99,99</span></span><br><span class="line">    <span class="built_in">Vaargs</span>(<span class="number">1</span>, <span class="number">2</span>);<span class="comment">//99,99,1,2,99,99</span></span><br><span class="line">    <span class="built_in">Vaargs</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);<span class="comment">//1,2,3,99,99,99</span></span><br><span class="line">    <span class="built_in">Vaargs</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);<span class="comment">//99,1,2,3,4,99</span></span><br><span class="line">    <span class="built_in">Vaargs</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);<span class="comment">//99,1,2,3,4,5</span></span><br><span class="line">    <span class="built_in">Vaargs</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>);<span class="comment">//1,2,3,4,5,6</span></span><br><span class="line">    <span class="built_in">Vaargs</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>);<span class="comment">//0,0,0,0,0,0</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>后面看不太懂了</p>
<p>参考：书籍《深入理解c++11》<br>           <a target="_blank" rel="noopener" href="https://blog.csdn.net/code_peak/article/details/121053884">C语言变长参数函数原理_code_peak的博客-CSDN博客</a></p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/tags/">tags</a></li>
         
          <li><a target="_blank" rel="noopener" href="http://github.com/boolsatellite">Projects</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF"><span class="toc-number">1.</span> <span class="toc-text">变长模板</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%95%BF%E5%87%BD%E6%95%B0%E5%92%8C%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF%E5%8F%82%E6%95%B0"><span class="toc-number">1.1.</span> <span class="toc-text">变长函数和变长模板参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF%EF%BC%9A%E6%A8%A1%E6%9D%BF%E5%8F%82%E6%95%B0%E5%8C%85%E5%92%8C%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E5%8C%85"><span class="toc-number">1.2.</span> <span class="toc-text">变长模板：模板参数包和函数参数包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF%E8%BF%9B%E9%98%B6"><span class="toc-number">1.3.</span> <span class="toc-text">变长模板进阶</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/&text=变长模板"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/&title=变长模板"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/&is_video=false&description=变长模板"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=变长模板&body=Check out this article: http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/&title=变长模板"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/&title=变长模板"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/&title=变长模板"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/&title=变长模板"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/&name=变长模板&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2023/05/20/%E5%8F%98%E9%95%BF%E6%A8%A1%E6%9D%BF/&t=变长模板"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2016-2023
    boolsatellite
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="/tags/">tags</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/boolsatellite">Projects</a></li><!--
     --><!--
       --><li><a href="/search/">Search</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SPWV8NBZ00"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-SPWV8NBZ00');
    </script>

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
